{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lim\\\\Desktop\\\\Clone\\\\login-mern\\\\client\\\\src\\\\components\\\\Profile\\\\components\\\\MiddleProfile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useHistory, useParams, useLocation } from 'react-router';\nimport UserPost from './UserPost';\nimport { followUser } from '../../../redux/actions/users'; // getUserProfile\n// import { fetchUserPostsLimit } from '../../../redux/actions/post';\n\nimport loadingCat from \"../../../svg/loadingCat.svg\";\nimport follow from \"../../../svg/follow.svg\";\nimport following from \"../../../svg/following.svg\";\nimport edit from \"../../../svg/edit.svg\";\nimport MainProfileLoading from '../../layout/Skeleton Loading/MainProfile';\nimport PostLoading from '../../layout/Skeleton Loading/Post';\nimport Search from '../../layout/Search';\nimport EditUserProfile from '../../layout/EditUserProfile';\nimport ProfilePictureModal from '../../layout/ProfilePictureModal';\nimport CoverPhotoModal from '../../layout/CoverPhotoModal';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst MiddleProfile = () => {\n  _s();\n\n  var _user$user2, _user$user2$followers, _user$user3, _user$user4, _user$user5, _user$user6, _user$user7, _user$user8, _user$user9, _user$user10, _user$user11, _user$user12;\n\n  const dispatch = useDispatch();\n  const {\n    id\n  } = useParams();\n  const history = useHistory();\n  const [modal, setModal] = useState(false);\n  const [coverPhotoModal, setcoverPhotoModal] = useState(false);\n  const [profilePictureModal, setprofilePictureModal] = useState(false);\n  const [pageNumber, setPageNumber] = useState(1);\n  const user = useSelector(state => state.users);\n  const post = useSelector(state => state.posts);\n  const authenticatedUserId = useSelector(state => state.auth.authData._id);\n  const location = useLocation();\n  const observer = useRef();\n  const [hasMore, setHasMore] = useState(false); //turn the post state to an empty array every render \n\n  useEffect(() => {\n    //since we are making a new request every time we click on a different user we want to set our page number to default value of 1.\n    setPageNumber(1);\n    dispatch({\n      type: 'RESET_POSTS'\n    }); // dispatch(getUserProfile(id,history));\n\n    const CancelToken = axios.CancelToken;\n    let cancel;\n    dispatch({\n      type: 'USER_LOADING'\n    });\n    axios.get(`/users/user/${id}`, {\n      cancelToken: new CancelToken(function executor(c) {\n        cancel = c;\n      })\n    }).then(({\n      data\n    }) => {\n      dispatch({\n        type: 'USER',\n        payload: data\n      });\n    }).catch(error => {\n      if (axios.isCancel(error)) console.log('Request Canceled! getting User Profile');\n      dispatch({\n        type: 'USERS_ERROR',\n        payload: error\n      });\n    });\n    return () => cancel();\n  }, [location, dispatch, id, history]);\n  useEffect(() => {\n    // dispatch(fetchUserPostsLimit(history,id ,pageNumber, setHasMore));\n    // this cancelToken is for cancelling an API request everytime the components unmount\n    const CancelToken = axios.CancelToken;\n    let cancel;\n    dispatch({\n      type: 'POSTS_LOADING'\n    });\n    axios.get(`/post/user?user=${id}&page=${pageNumber}`, {\n      cancelToken: new CancelToken(function executor(c) {\n        // An executor function receives a cancel function as a parameter\n        cancel = c;\n      })\n    }).then(({\n      data\n    }) => {\n      setHasMore(data.result.length > 0);\n      dispatch({\n        type: 'POSTS',\n        payload: data\n      });\n    }).catch(error => {\n      if (axios.isCancel(error)) {\n        console.log('Request Canceled!');\n      } else {\n        var _error$response;\n\n        dispatch({\n          type: 'ERRORS',\n          payload: error\n        });\n\n        if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n          dispatch({\n            type: 'LOGOUT'\n          });\n          history.push('/login');\n        }\n      }\n    });\n    return () => cancel();\n  }, [dispatch, history, pageNumber, location, id]); //intersection observer, request another set of posts when reaching the bottom or last post\n\n  const lastBookElementRef = useCallback(node => {\n    if (post.loading) return;\n    if (observer.current) observer.current.disconnect();\n    observer.current = new IntersectionObserver(entries => {\n      if (entries[0].isIntersecting && hasMore) {\n        setPageNumber(prevPageNumber => prevPageNumber + 1);\n      }\n    }, {\n      rootMargin: \"-150px\"\n    });\n    if (node) observer.current.observe(node);\n  }, [post.loading, hasMore]);\n\n  const handleFollowUser = () => {\n    var _user$user;\n\n    dispatch(followUser((_user$user = user.user) === null || _user$user === void 0 ? void 0 : _user$user._id));\n  };\n\n  const followOrfollowing = (_user$user2 = user.user) === null || _user$user2 === void 0 ? void 0 : (_user$user2$followers = _user$user2.followers) === null || _user$user2$followers === void 0 ? void 0 : _user$user2$followers.some(followerx => followerx.user === authenticatedUserId);\n\n  const ButtonFollowOrFollowing = () => {\n    if (followOrfollowing) {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"bg-button2 hover:bg-opacity-100 active:bg-opacity-80 transition  ease-out duration-100 text-sm font-light px-6 py-1 rounded-full flex gap-2 items-center justify-center\",\n        onClick: handleFollowUser,\n        children: user.userFollowingLoading ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: loadingCat,\n          alt: \"\",\n          className: \"h-5 w-5 m-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 42\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-shrink-0\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: following,\n              alt: \"\",\n              className: \"h-4 w-4 m-auto\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 52\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 21\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Following\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 116\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 20\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"bg-button2 hover:bg-opacity-100 active:bg-opacity-80 transition  ease-out duration-100 text-sm font-light px-6 py-1 rounded-full flex gap-2 items-center justify-center\",\n        onClick: handleFollowUser,\n        children: user.userFollowingLoading ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: loadingCat,\n          alt: \"\",\n          className: \"h-5 w-5 m-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 46\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-shrink-0\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: follow,\n              alt: \"\",\n              className: \"h-4 w-4 m-auto\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 56\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 25\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Follow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 117\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 20\n      }, this);\n    }\n  };\n\n  const FollowersOrFollow = () => {\n    var _user$user$followers;\n\n    if (((_user$user$followers = user.user.followers) === null || _user$user$followers === void 0 ? void 0 : _user$user$followers.length) > 1) {\n      var _user$user$followers2;\n\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\" \", (_user$user$followers2 = user.user.followers) === null || _user$user$followers2 === void 0 ? void 0 : _user$user$followers2.length, \" followers \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 20\n      }, this);\n    } else {\n      var _user$user$followers3;\n\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [(_user$user$followers3 = user.user.followers) === null || _user$user$followers3 === void 0 ? void 0 : _user$user$followers3.length, \" follower\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 20\n      }, this);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lg:col-span-9 xl:col-span-6 col-span-full space-y-4 mb-16 md:mb-0\",\n      children: [/*#__PURE__*/_jsxDEV(Search, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 13\n      }, this), user.userLoading ? /*#__PURE__*/_jsxDEV(MainProfileLoading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 34\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full h-56 rounded-t-md overflow-y-contain relative\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-black bg-opacity-20 absolute inset-0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 25\n          }, this), ((_user$user3 = user.user) === null || _user$user3 === void 0 ? void 0 : _user$user3.coverPhoto) && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: (_user$user4 = user.user) === null || _user$user4 === void 0 ? void 0 : _user$user4.coverPhoto,\n            alt: \"\",\n            className: \"w-full h-full object-cover border-none\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 51\n          }, this), ((_user$user5 = user.user) === null || _user$user5 === void 0 ? void 0 : _user$user5._id) === authenticatedUserId && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bg-button2 p-2 absolute rounded-full bottom-0 right-0 m-3 flex items-center justify-center gap-1 bg-opacity-50\",\n            onCLick: setcoverPhotoModal(prev => !prev),\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"img\", {\n              src: edit,\n              alt: \"edit\",\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 205\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs hidden sm:block\",\n              children: \"Edit Cover photo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 254\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-center flex-col sm:flex-row sm:justify-between bg-primary rounded-b-md\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col justify-center items-center gap-3 px-4 pt-2 pb-1 md:pb-none sm:pb-5 z-10 sm:flex-row sm:justify-start\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"-mt-20 flex-shrink-0 relative \",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: (_user$user6 = user.user) === null || _user$user6 === void 0 ? void 0 : _user$user6.imageUrl,\n                  alt: \"\",\n                  className: \"rounded-full h-28 w-28 border-4 border-borderProfile object-cover relative bg-purple-400\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 37\n                }, this), ((_user$user7 = user.user) === null || _user$user7 === void 0 ? void 0 : _user$user7._id) === authenticatedUserId && /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"flex items-center justify-center p-2 absolute bottom-0 right-2 bg-button2 rounded-full bg-opacity-50\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: edit,\n                    alt: \"\",\n                    className: \"h-4 w-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 168,\n                    columnNumber: 162\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center sm:text-left space-y-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                    className: \"text-lg font-semibold\",\n                    children: [(_user$user8 = user.user) === null || _user$user8 === void 0 ? void 0 : _user$user8.firstname, \" \", (_user$user9 = user.user) === null || _user$user9 === void 0 ? void 0 : _user$user9.lastname]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 173,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-300\",\n                    children: (_user$user10 = user.user) === null || _user$user10 === void 0 ? void 0 : _user$user10.email\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-md text-gray-300 font-light\",\n                  children: [\" \", /*#__PURE__*/_jsxDEV(FollowersOrFollow, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 176,\n                    columnNumber: 86\n                  }, this), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 29\n            }, this), ((_user$user11 = user.user) === null || _user$user11 === void 0 ? void 0 : _user$user11._id) === authenticatedUserId ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-3 flex items-start justify-center\",\n              children: /*#__PURE__*/_jsxDEV(ButtonFollowOrFollowing, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 39\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 25\n          }, this), ((_user$user12 = user.user) === null || _user$user12 === void 0 ? void 0 : _user$user12._id) === authenticatedUserId && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"bg-primary border-borderColor border w-full flex gap-2 justify-center items-center p-3 rounded-md\",\n              onClick: () => setModal(prev => !prev),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: edit,\n                  alt: \"edit\",\n                  className: \"h-5 w-5 m-auto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Edit Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 29\n            }, this)\n          }, void 0, false)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: post.loading && (post === null || post === void 0 ? void 0 : post.posts.length) === 0 ? /*#__PURE__*/_jsxDEV(PostLoading, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 60\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-5\",\n          children: [post.posts.map((postx, index) => {\n            if ((post === null || post === void 0 ? void 0 : post.posts.length) === index + 1) {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: lastBookElementRef,\n                children: /*#__PURE__*/_jsxDEV(UserPost, {\n                  post: postx\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 41\n                }, this)\n              }, postx._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 38\n              }, this);\n            } else if (postx === 0) {\n              return null;\n            } else {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(UserPost, {\n                  post: postx\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 41\n                }, this)\n              }, postx._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 37\n              }, this);\n            }\n          }), !hasMore && (post === null || post === void 0 ? void 0 : post.posts.length) > 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center font-light text-sm\",\n            children: \"There are no more posts to show right now.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 57\n          }, this) : (post === null || post === void 0 ? void 0 : post.posts.length) === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center font-light text-sm\",\n            children: \"No post found..\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 179\n          }, this) : null, post.loading && /*#__PURE__*/_jsxDEV(PostLoading, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 20\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }, this), modal && /*#__PURE__*/_jsxDEV(EditUserProfile, {\n      setModal: setModal,\n      userInfo: user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 19\n    }, this), coverPhotoModal && /*#__PURE__*/_jsxDEV(ProfilePictureModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 29\n    }, this), profilePictureModal && /*#__PURE__*/_jsxDEV(CoverPhotoModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 33\n    }, this)]\n  }, void 0, true);\n};\n\n_s(MiddleProfile, \"Is3p7aGqQOQla/pd+TkK21jpn2s=\", false, function () {\n  return [useDispatch, useParams, useHistory, useSelector, useSelector, useSelector, useLocation];\n});\n\n_c = MiddleProfile;\nexport default MiddleProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"MiddleProfile\");","map":{"version":3,"sources":["C:/Users/Lim/Desktop/Clone/login-mern/client/src/components/Profile/components/MiddleProfile.js"],"names":["React","useState","useEffect","useRef","useCallback","useSelector","useDispatch","useHistory","useParams","useLocation","UserPost","followUser","MainProfileLoading","PostLoading","Search","EditUserProfile","ProfilePictureModal","CoverPhotoModal","axios","MiddleProfile","dispatch","id","history","modal","setModal","coverPhotoModal","setcoverPhotoModal","profilePictureModal","setprofilePictureModal","pageNumber","setPageNumber","user","state","users","post","posts","authenticatedUserId","auth","authData","_id","location","observer","hasMore","setHasMore","type","CancelToken","cancel","get","cancelToken","executor","c","then","data","payload","catch","error","isCancel","console","log","result","length","response","status","push","lastBookElementRef","node","loading","current","disconnect","IntersectionObserver","entries","isIntersecting","prevPageNumber","rootMargin","observe","handleFollowUser","followOrfollowing","followers","some","followerx","ButtonFollowOrFollowing","userFollowingLoading","loadingCat","following","follow","FollowersOrFollow","userLoading","coverPhoto","prev","edit","imageUrl","firstname","lastname","email","map","postx","index"],"mappings":"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","sourcesContent":["import React,{useState, useEffect, useRef, useCallback} from 'react';\r\nimport { useSelector,useDispatch } from 'react-redux';\r\nimport { useHistory, useParams, useLocation } from 'react-router';\r\n\r\nimport UserPost from './UserPost';\r\n\r\nimport { followUser } from '../../../redux/actions/users';\r\n// getUserProfile\r\n// import { fetchUserPostsLimit } from '../../../redux/actions/post';\r\n\r\nimport loadingCat from '../../../svg/loadingCat.svg';\r\nimport follow from '../../../svg/follow.svg';\r\nimport following from '../../../svg/following.svg';\r\nimport edit from '../../../svg/edit.svg';\r\n\r\nimport MainProfileLoading from '../../layout/Skeleton Loading/MainProfile';\r\nimport PostLoading from '../../layout/Skeleton Loading/Post';\r\nimport Search from '../../layout/Search';\r\nimport EditUserProfile from '../../layout/EditUserProfile';\r\nimport ProfilePictureModal from '../../layout/ProfilePictureModal';\r\nimport CoverPhotoModal from '../../layout/CoverPhotoModal';\r\n\r\nimport axios from 'axios';\r\n\r\n\r\nconst MiddleProfile = () => {\r\n    const dispatch = useDispatch();\r\n    const {id} = useParams();\r\n    const history = useHistory();\r\n    const [modal,setModal] = useState(false);\r\n    const [coverPhotoModal, setcoverPhotoModal] = useState(false);\r\n    const [profilePictureModal, setprofilePictureModal] = useState(false);\r\n    const [pageNumber, setPageNumber] = useState(1);\r\n    const user = useSelector(state => state.users);\r\n    const post = useSelector(state => state.posts);\r\n    const authenticatedUserId = useSelector(state => state.auth.authData._id);\r\n    const location = useLocation();\r\n    const observer = useRef();\r\n    const [hasMore, setHasMore] = useState(false);\r\n   //turn the post state to an empty array every render \r\n   useEffect(() => {\r\n        //since we are making a new request every time we click on a different user we want to set our page number to default value of 1.\r\n        setPageNumber(1);\r\n        dispatch({type: 'RESET_POSTS'});\r\n\r\n        // dispatch(getUserProfile(id,history));\r\n\r\n        const CancelToken = axios.CancelToken;\r\n        let cancel;\r\n        dispatch({type: 'USER_LOADING'});\r\n        axios.get(`/users/user/${id}`,{cancelToken: new CancelToken(function executor(c){\r\n            cancel = c;\r\n        })}).then(({data}) => {\r\n            dispatch ({type: 'USER', payload: data});\r\n        }).catch((error) => {\r\n            if(axios.isCancel(error)) console.log('Request Canceled! getting User Profile')\r\n            dispatch({type: 'USERS_ERROR', payload: error});\r\n        })\r\n        return () => cancel();\r\n    },[location,dispatch,id, history]);\r\n\r\n    useEffect(()=> {\r\n        // dispatch(fetchUserPostsLimit(history,id ,pageNumber, setHasMore));\r\n\r\n        // this cancelToken is for cancelling an API request everytime the components unmount\r\n        const CancelToken = axios.CancelToken;\r\n        let cancel;\r\n\r\n        dispatch({type:'POSTS_LOADING'});\r\n        axios.get(`/post/user?user=${id}&page=${pageNumber}`, { cancelToken: new CancelToken(function executor(c) {\r\n            // An executor function receives a cancel function as a parameter\r\n            cancel = c;\r\n          }) }).then(({data})=>{\r\n            setHasMore(data.result.length > 0);\r\n            dispatch({type: 'POSTS', payload: data});\r\n        }).catch((error) => {\r\n            if (axios.isCancel(error)) {\r\n                console.log('Request Canceled!'); \r\n            }\r\n            else{\r\n                dispatch({type:'ERRORS', payload: error});\r\n                if(error.response?.status === 401){\r\n                    dispatch({type: 'LOGOUT'});\r\n                    history.push('/login');\r\n                }\r\n            }\r\n        });\r\n\r\n        return () => cancel();\r\n    },[dispatch, history, pageNumber,location,id]);\r\n\r\n    //intersection observer, request another set of posts when reaching the bottom or last post\r\n   \r\n    const lastBookElementRef = useCallback((node) => {\r\n        if(post.loading) return \r\n        if(observer.current) observer.current.disconnect();\r\n        observer.current = new IntersectionObserver(entries => {    \r\n            if(entries[0].isIntersecting && hasMore){\r\n                setPageNumber(prevPageNumber => prevPageNumber + 1);\r\n            }\r\n        }, {rootMargin: \"-150px\"})\r\n        if(node) observer.current.observe(node);\r\n    },[post.loading, hasMore])\r\n\r\n\r\n\r\n    const handleFollowUser = () => {\r\n        dispatch(followUser(user.user?._id)); \r\n    }\r\n \r\n    const followOrfollowing = user.user?.followers?.some(followerx => followerx.user === authenticatedUserId)\r\n    const ButtonFollowOrFollowing = () => {\r\n        if(followOrfollowing){\r\n            return <button className=\"bg-button2 hover:bg-opacity-100 active:bg-opacity-80 transition  ease-out duration-100 text-sm font-light px-6 py-1 rounded-full flex gap-2 items-center justify-center\" onClick={handleFollowUser} >\r\n            {user.userFollowingLoading ? <img src={loadingCat} alt=\"\" className=\"h-5 w-5 m-auto\" /> : \r\n                <>\r\n                    <div className=\"flex-shrink-0\"><img src={following} alt=\"\" className=\"h-4 w-4 m-auto\" /></div> <span>Following</span>\r\n                </>\r\n            }\r\n            </button>\r\n        \r\n        }else{\r\n            return <button className=\"bg-button2 hover:bg-opacity-100 active:bg-opacity-80 transition  ease-out duration-100 text-sm font-light px-6 py-1 rounded-full flex gap-2 items-center justify-center\" onClick={handleFollowUser}>\r\n                {user.userFollowingLoading ? <img src={loadingCat} alt=\"\" className=\"h-5 w-5 m-auto\" /> : \r\n                    <>\r\n                        <div className=\"flex-shrink-0\"><img src={follow} alt=\"\" className=\"h-4 w-4 m-auto\" /></div> <span>Follow</span>\r\n                    </>\r\n                }\r\n            </button>\r\n        }\r\n\r\n    }\r\n    const FollowersOrFollow = () => {\r\n        if(user.user.followers?.length > 1){\r\n            return <span> {user.user.followers?.length} followers </span>\r\n        }else{\r\n            return <span>{user.user.followers?.length} follower</span>\r\n        }\r\n    }\r\n  \r\n    return (\r\n    <>\r\n        <div className=\"lg:col-span-9 xl:col-span-6 col-span-full space-y-4 mb-16 md:mb-0\">\r\n            <Search />\r\n\r\n            {/* USER PROFILE SECTION */}\r\n            {/*  */}\r\n            {user.userLoading ?  <MainProfileLoading /> :   \r\n                <div>\r\n                    {/* cover image section */}\r\n                    <div className=\"w-full h-56 rounded-t-md overflow-y-contain relative\">\r\n                        {/* overlay */}\r\n                        <div className=\"bg-black bg-opacity-20 absolute inset-0\"></div>\r\n\r\n                        {/* checks if theres a cover photo */}\r\n                        {user.user?.coverPhoto && <img src={user.user?.coverPhoto} alt=\"\" className=\"w-full h-full object-cover border-none\" /> }  \r\n                        {user.user?._id === authenticatedUserId && \r\n                            <button className=\"bg-button2 p-2 absolute rounded-full bottom-0 right-0 m-3 flex items-center justify-center gap-1 bg-opacity-50\" onCLick={setcoverPhotoModal(prev => !prev)}> <img src={edit} alt=\"edit\" className=\"h-4 w-4\" /><p className=\"text-xs hidden sm:block\">Edit Cover photo</p></button> \r\n                        }\r\n                        \r\n                    </div>\r\n                    <div className=\"space-y-4\">\r\n                        <div className=\"flex justify-center flex-col sm:flex-row sm:justify-between bg-primary rounded-b-md\">\r\n                            <div className=\"flex flex-col justify-center items-center gap-3 px-4 pt-2 pb-1 md:pb-none sm:pb-5 z-10 sm:flex-row sm:justify-start\">\r\n                                <div className=\"-mt-20 flex-shrink-0 relative \">\r\n                                    <img src={user.user?.imageUrl} alt=\"\" className=\"rounded-full h-28 w-28 border-4 border-borderProfile object-cover relative bg-purple-400\" />\r\n                                    {user.user?._id === authenticatedUserId && \r\n                                        <button className=\"flex items-center justify-center p-2 absolute bottom-0 right-2 bg-button2 rounded-full bg-opacity-50\"><img src={edit} alt=\"\" className=\"h-4 w-4\"/></button>\r\n                                    }\r\n                                </div>\r\n                                <div className=\"text-center sm:text-left space-y-1\">\r\n                                    <div>\r\n                                        <h1 className=\"text-lg font-semibold\">{user.user?.firstname} {user.user?.lastname}</h1>\r\n                                        <p className=\"text-sm text-gray-300\">{user.user?.email}</p>\r\n                                    </div>\r\n                                    <p className=\"text-md text-gray-300 font-light\"> <FollowersOrFollow/> </p>\r\n                                </div>\r\n                            \r\n                            </div>\r\n                            \r\n                            {user.user?._id === authenticatedUserId ?\r\n                                    null :   \r\n                                    <div className=\"p-3 flex items-start justify-center\">\r\n                                      <ButtonFollowOrFollowing />\r\n                                    </div>\r\n                                }\r\n                            \r\n                        </div>\r\n                        {/* Edit Profile */}\r\n                        {user.user?._id === authenticatedUserId && \r\n                        <>\r\n                            <button className=\"bg-primary border-borderColor border w-full flex gap-2 justify-center items-center p-3 rounded-md\" onClick={() => setModal(prev => !prev)}>\r\n                                <div>\r\n                                    <img src={edit} alt=\"edit\" className=\"h-5 w-5 m-auto\" />\r\n                                </div>\r\n                                <p>Edit Profile</p>\r\n                            </button>\r\n                        </>\r\n                        }\r\n                    </div>\r\n\r\n                </div>\r\n                \r\n            }\r\n            \r\n            {/* END USER PROFILE SECTION */}\r\n        \r\n            {/* USER POST */}\r\n            <div className=\"space-y-4\">\r\n                {  \r\n                post.loading && post?.posts.length === 0 ? <PostLoading/> :\r\n                   <div className=\"space-y-5\">\r\n                   {post.posts.map((postx, index) => {\r\n                       if(post?.posts.length === index + 1){\r\n                           return (  <div key={postx._id} ref={lastBookElementRef}>\r\n                                        <UserPost post={postx} />\r\n                                   </div> \r\n                               )\r\n                       } else if( postx === 0){\r\n                        return null\r\n                        }\r\n                       else{\r\n                           return ( <div key={postx._id}>\r\n                                        <UserPost post={postx} />\r\n                                    </div>)\r\n                       }\r\n                       })\r\n                   }    \r\n                   {!hasMore && post?.posts.length > 0? <p className=\"text-center font-light text-sm\">There are no more posts to show right now.</p> : post?.posts.length === 0 ? <p className=\"text-center font-light text-sm\">No post found..</p> : null }\r\n                   {post.loading && <PostLoading/>} \r\n                   </div>\r\n                    \r\n                }\r\n            </div>\r\n            {/* END USER POST */} \r\n        </div>\r\n        \r\n        {modal && <EditUserProfile setModal={setModal} userInfo={user}/>} \r\n        {coverPhotoModal && <ProfilePictureModal/>}\r\n        {profilePictureModal && <CoverPhotoModal />}\r\n    </>\r\n    )\r\n}\r\n\r\nexport default MiddleProfile\r\n"]},"metadata":{},"sourceType":"module"}