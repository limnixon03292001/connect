{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lim\\\\Desktop\\\\Clone\\\\login-mern\\\\client\\\\src\\\\components\\\\Search\\\\components\\\\MiddleSearch.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useLocation, Link, useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux'; // import { searchUser } from '../../../redux/actions/users';\n\nimport Search from '../../layout/Search';\nimport loadingCat from \"../../../svg/loadingCat.svg\";\nimport defaultImage from '../../../svg/defaultImage.jpg';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MiddleSearch = () => {\n  _s();\n\n  const {\n    search\n  } = useLocation();\n  const query = new URLSearchParams(search);\n  const searchData = query.get('user');\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const user = useSelector(state => state.users);\n  useEffect(() => {\n    // dispatch(searchUser(searchData));\n    const CancelToken = axios.CancelToken;\n    let cancel;\n    dispatch({\n      type: 'SEARCH_LOADING'\n    });\n    axios.get(`/users/search?q=${searchData}`, {\n      cancelToken: new CancelToken(function executor(c) {\n        // An executor function receives a cancel function as a parameter\n        cancel = c;\n      })\n    }).then(({\n      data\n    }) => {\n      dispatch({\n        type: 'SEARCH_USER',\n        payload: data\n      });\n    }).catch(error => {\n      if (axios.isCancel(error)) {\n        console.log('Request Canceled sa search2');\n      } else {\n        var _error$response;\n\n        dispatch({\n          type: 'ERRORS',\n          payload: error\n        });\n\n        if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n          dispatch({\n            type: 'LOGOUT'\n          });\n          history.push('/login');\n        }\n      }\n    });\n    return () => cancel();\n  }, [dispatch, searchData, history]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"lg:col-span-9 xl:col-span-6 col-span-full space-y-5 mb-16 md:mb-0\",\n    children: [/*#__PURE__*/_jsxDEV(Search, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), user.searchLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-center space-y-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: loadingCat,\n        alt: \"loading...\",\n        className: \"h-18 w-18 object-cover\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Looking for \", searchData]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-2xl text-gray-200 mb-2\",\n        children: [\"Search: \", searchData]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }, this), user.searchUser.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"User doesn't exist.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 45\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-3\",\n        children: user.searchUser.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full h-20 z-10 relative overflow-hidden rounded-md shadow\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: `/profile/${user._id}`,\n            children: [(user === null || user === void 0 ? void 0 : user.coverPhoto) && /*#__PURE__*/_jsxDEV(\"img\", {\n              src: user.coverPhoto,\n              alt: \"\",\n              className: \"object-cover object-center w-full h-full opacity-40\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-4 items-center space-y-3  absolute inset-0 overflow-hidden\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-20 h-full rounded-tl-md rounded-bl-md\",\n                children: (user === null || user === void 0 ? void 0 : user.imageUrl) ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: user === null || user === void 0 ? void 0 : user.imageUrl,\n                  alt: \"\",\n                  className: \"w-full h-full object-cover object-center\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 69,\n                  columnNumber: 47\n                }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: defaultImage,\n                  alt: \"\",\n                  className: \"w-full h-full object-cover object-center\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 69,\n                  columnNumber: 138\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 27\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-col justify-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"text-sm font-semibold text-white\",\n                  children: [user === null || user === void 0 ? void 0 : user.firstname, \" \", user === null || user === void 0 ? void 0 : user.lastname]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 72,\n                  columnNumber: 31\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-gray-200\",\n                  children: user === null || user === void 0 ? void 0 : user.email\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 73,\n                  columnNumber: 31\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 27\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 19\n          }, this)\n        }, user._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 12\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n};\n\n_s(MiddleSearch, \"y/0Y78A+l3mHGpEDSVb/SPxBfqw=\", false, function () {\n  return [useLocation, useDispatch, useHistory, useSelector];\n});\n\n_c = MiddleSearch;\nexport default MiddleSearch;\n\nvar _c;\n\n$RefreshReg$(_c, \"MiddleSearch\");","map":{"version":3,"sources":["C:/Users/Lim/Desktop/Clone/login-mern/client/src/components/Search/components/MiddleSearch.js"],"names":["React","useEffect","useLocation","Link","useHistory","useDispatch","useSelector","Search","defaultImage","axios","MiddleSearch","search","query","URLSearchParams","searchData","get","dispatch","history","user","state","users","CancelToken","cancel","type","cancelToken","executor","c","then","data","payload","catch","error","isCancel","console","log","response","status","push","searchLoading","loadingCat","searchUser","length","map","_id","coverPhoto","imageUrl","firstname","lastname","email"],"mappings":"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","sourcesContent":["import React,{useEffect} from 'react';\r\nimport { useLocation, Link, useHistory } from 'react-router-dom';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\n// import { searchUser } from '../../../redux/actions/users';\r\n\r\nimport Search from '../../layout/Search';\r\nimport loadingCat from '../../../svg/loadingCat.svg';\r\nimport defaultImage from '../../../svg/defaultImage.jpg';\r\n\r\nimport axios from 'axios';\r\n\r\nconst MiddleSearch = () => {\r\n    const {search} = useLocation();\r\n    const query = new URLSearchParams(search);\r\n    const searchData = query.get('user');\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n\r\n    const user = useSelector(state => state.users);\r\n\r\n    useEffect(()=>{\r\n\r\n        // dispatch(searchUser(searchData));\r\n\r\n        const CancelToken = axios.CancelToken;\r\n        let cancel;\r\n        dispatch({type: 'SEARCH_LOADING'});\r\n        axios.get(`/users/search?q=${searchData}`, { cancelToken: new CancelToken(function executor(c) {\r\n            // An executor function receives a cancel function as a parameter\r\n            cancel = c;\r\n        })}).then(({data})=>{\r\n            dispatch({type: 'SEARCH_USER', payload: data});\r\n        }).catch((error) => {\r\n            if (axios.isCancel(error)) {\r\n                console.log('Request Canceled sa search2'); \r\n            }\r\n            else{\r\n                dispatch({type:'ERRORS', payload: error});\r\n                if(error.response?.status === 401){\r\n                    dispatch({type: 'LOGOUT'});\r\n                    history.push('/login');\r\n                }\r\n            }\r\n        });\r\n\r\n       return () => cancel();\r\n    },[dispatch,searchData,history]);\r\n\r\n    return (\r\n        <div className=\"lg:col-span-9 xl:col-span-6 col-span-full space-y-5 mb-16 md:mb-0\">\r\n            <Search />\r\n        {user.searchLoading ?\r\n        <div className=\"flex flex-col items-center space-y-3\">\r\n            <img src={loadingCat} alt=\"loading...\" className=\"h-18 w-18 object-cover\"/>\r\n            <p>Looking for {searchData}</p>\r\n        </div> : \r\n        <div className=\"space-y-3\">\r\n            <p className=\"text-2xl text-gray-200 mb-2\">Search: {searchData}</p>\r\n            {/* checking the array if theres a data  */}\r\n           { user.searchUser.length === 0 ? <p>User doesn't exist.</p> :\r\n           <div className=\"space-y-3\">\r\n            {user.searchUser.map((user) => (\r\n                <div key={user._id} className=\"w-full h-20 z-10 relative overflow-hidden rounded-md shadow\">\r\n                  <Link to={`/profile/${user._id}`}>\r\n                      {user?.coverPhoto &&  <img src={user.coverPhoto} alt=\"\" className=\"object-cover object-center w-full h-full opacity-40\"/>}\r\n                 \r\n                      <div className=\"flex gap-4 items-center space-y-3  absolute inset-0 overflow-hidden\">\r\n                          <div className=\"w-20 h-full rounded-tl-md rounded-bl-md\">\r\n                            {user?.imageUrl ? <img src={user?.imageUrl} alt=\"\" className=\"w-full h-full object-cover object-center\" /> : <img src={defaultImage} alt=\"\" className=\"w-full h-full object-cover object-center\" />}\r\n                          </div>\r\n                          <div className=\"flex flex-col justify-center\">\r\n                              <h1 className=\"text-sm font-semibold text-white\">{user?.firstname} {user?.lastname}</h1>\r\n                              <p className=\"text-xs text-gray-200\">{user?.email}</p>\r\n                          </div>\r\n                      </div>\r\n                  </Link>\r\n              </div>\r\n            ))}\r\n            </div>}\r\n        </div>\r\n        }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MiddleSearch\r\n"]},"metadata":{},"sourceType":"module"}