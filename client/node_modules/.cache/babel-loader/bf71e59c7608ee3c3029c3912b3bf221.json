{"ast":null,"code":"import _defineProperty from\"C:/Users/Lim/Desktop/Clone/login-mern/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/Lim/Desktop/Clone/login-mern/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/Lim/Desktop/Clone/login-mern/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import Loading from'../layout/Loading';import{useHistory}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{signUp,signIn}from'../../redux/actions/auth';// import GoogleSvg from '../layout/GoogleSvg';\n// import { GoogleLogin } from 'react-google-login';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialState={firstname:'',lastname:'',email:'',confirmPassword:'',password:''};var Login=function Login(){var _authData$error,_authData$error2,_authData$error3,_authData$error4,_authData$error5,_authData$error6,_authData$error7,_authData$error8,_authData$error9,_authData$error10,_authData$error11,_authData$error12;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isSignup=_useState2[0],setisSignup=_useState2[1];var _useState3=useState(initialState),_useState4=_slicedToArray(_useState3,2),userData=_useState4[0],setuserData=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),blob=_useState6[0],setBlob=_useState6[1];var history=useHistory();var dispatch=useDispatch();var authData=useSelector(function(state){return state.auth;});var ref=useRef();//Checks if the user is authenticated, then if its true redirect to homepage\nuseEffect(function(){if(localStorage.getItem('token')){history.push('/');}},[history]);var handleSubmit=function handleSubmit(e){e.preventDefault();var myForm=e.target;var formData=new FormData(myForm);if(isSignup){for(var _i=0,_Object$entries=Object.entries(userData);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];if(value.trim()===\"\"){return alert(\"\".concat(key,\" is required!\"));}}if(userData.password.trim()!==userData.confirmPassword.trim()){return dispatch({type:'ERROR',payload:{password:\"Password and Confirm Password doesn't match!\"}});}dispatch(signUp(formData,setisSignup,clear));}else{dispatch(signIn(userData,history));}};var handleBlob=function handleBlob(e){if(e.target.files[0].type!==\"image/jpg\"&&e.target.files[0].type!==\"image/jpeg\"&&e.target.files[0].type!==\"image/png\"){ref.current.reset();setBlob('');return alert('File type not supported!');}setBlob(URL.createObjectURL(e.target.files[0]));};var handleChange=function handleChange(e){setuserData(_objectSpread(_objectSpread({},userData),{},_defineProperty({},e.target.name,e.target.value)));};var setSignUp=function setSignUp(){setisSignup(function(prev){return!prev;});clear();dispatch({type:'CLEAR_ERROR'});};var clear=function clear(){setuserData({firstname:'',lastname:'',email:'',confirmPassword:'',password:''});setBlob('');};// Google Auth \n// const googleSuccess = async (res) => {\n//     const profile = res?.profileObj;\n//     const token = res?.tokenId;\n//     try{\n//         dispatch({type: 'LOGIN', payload: {profile, token}});\n//         history.push('/');\n//     }catch(error){\n//         console.log(error);\n//     }\n// }\n// const googleFailure = async (error) => {\n//     console.log(error);\n//     console.log('Google Sign in failed.')\n// } // Google Auth \nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed m-4 z-40 text-sm text-gray-300 text-center bottom-0 right-0 underline\",children:/*#__PURE__*/_jsx(\"a\",{href:\"https://www.facebook.com/limnixon03292001/\",children:\"Developed By: Nixon A. Lim\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative z-10 w-full max-w-full min-h-screen flex justify-center items-center border-red-500\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white tracking-wide bg-opacity-13 px-8 py-9 rounded shadow md:w-96 h-auto space-y-10 m-2 \".concat(isSignup&&\"md:w-1/2 lg:w-2/5 \"),children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl text-gray-600 text-center w-full\",children:[isSignup?blob===''?'Sign Up':/*#__PURE__*/_jsx(\"img\",{src:blob,alt:blob,className:\"rounded-full block w-24 h-24 m-auto object-cover\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"Welcome to\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl\",children:\"Connect!\"})]}),\" \"]}),/*#__PURE__*/_jsxs(\"form\",{className:\"space-y-5 \".concat(isSignup&&\"sm:space-y-2\"),onSubmit:handleSubmit,ref:ref,children:[isSignup&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-600 text-xs md:text-sm\",children:\"Firstname\"}),((_authData$error=authData.error)===null||_authData$error===void 0?void 0:_authData$error.firstname)&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-400 text-xs\",children:(_authData$error2=authData.error)===null||_authData$error2===void 0?void 0:_authData$error2.firstname}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"firstname\",placeholder:\"FirstName\",className:\"w-full border border-gray-200 p-2 rounded mt-2 outline-none focus:border-blue-500\",onChange:handleChange,value:userData.firstname,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-600 text-xs md:text-sm\",children:\"Lastname\"}),((_authData$error3=authData.error)===null||_authData$error3===void 0?void 0:_authData$error3.lastname)&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-400 text-xs\",children:(_authData$error4=authData.error)===null||_authData$error4===void 0?void 0:_authData$error4.lastname}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lastname\",placeholder:\"LastName\",className:\"w-full border border-gray-200 p-2 rounded mt-2 outline-none focus:border-blue-500\",onChange:handleChange,value:userData.lastname,required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-600 text-xs md:text-sm\",children:\"Email\"}),((_authData$error5=authData.error)===null||_authData$error5===void 0?void 0:_authData$error5.email)&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-400 text-xs\",children:(_authData$error6=authData.error)===null||_authData$error6===void 0?void 0:_authData$error6.email}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",placeholder:\"Email\",className:\"w-full border border-gray-200 p-2 rounded mt-2 outline-none focus:border-blue-500\",onChange:handleChange,value:userData.email,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-600 text-xs md:text-sm\",children:\"Password\"}),((_authData$error7=authData.error)===null||_authData$error7===void 0?void 0:_authData$error7.password)&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-400 text-xs\",children:(_authData$error8=authData.error)===null||_authData$error8===void 0?void 0:_authData$error8.password}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",className:\"w-full border border-gray-200 p-2 rounded mt-2 outline-none focus:border-blue-500\",onChange:handleChange,value:userData.password,required:true})]}),isSignup&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-600 text-xs md:text-sm\",children:\"Confirm Password\"}),((_authData$error9=authData.error)===null||_authData$error9===void 0?void 0:_authData$error9.confirmPassword)&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-400 text-xs\",children:(_authData$error10=authData.error)===null||_authData$error10===void 0?void 0:_authData$error10.confirmPassword}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"confirmPassword\",placeholder:\"Confirm Password\",className:\"w-full border border-gray-200 p-2 rounded mt-2 outline-none focus:border-blue-500\",onChange:handleChange,value:userData.confirmPassword,required:true}),/*#__PURE__*/_jsxs(\"div\",{children:[((_authData$error11=authData.error)===null||_authData$error11===void 0?void 0:_authData$error11.imageUrl)&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-400 text-xs\",children:(_authData$error12=authData.error)===null||_authData$error12===void 0?void 0:_authData$error12.imageUrl}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center md:gap-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-600 text-xs md:text-sm\",children:\"Upload Picture:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs md:text-sm p-2 text-gray-600 cursor-pointer \",children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"image\",onChange:handleBlob})}),/*#__PURE__*/_jsx(\"p\",{})]})]})]}),isSignup?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:/*#__PURE__*/_jsx(\"button\",{className:\"bg-purple-700 hover:bg-purple-400 text-white text-lg px-4 py-2 rounded block w-full active:bg-purple-300 transition ease-in duration-75\",children:/*#__PURE__*/_jsx(\"span\",{className:\"flex justify-center items-center text-md md:text-lg\",children:\"Sign Up\"})})}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-purple-700 hover:bg-purple-400 text-white px-4 py-2 rounded block w-full active:bg-purple-500 transition ease-in duration-75 text-md md:text-lg\",children:\"Login\"}),\"  \"]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 text-xs text-center cursor-pointer mt-1\",onClick:setSignUp,children:[isSignup?\" Already have an account?\":\"Don't have an account? Click here to Sign up!\",\"   \"]})]}),authData.loading&&/*#__PURE__*/_jsx(Loading,{})]})]});};export default Login;","map":{"version":3,"sources":["C:/Users/Lim/Desktop/Clone/login-mern/client/src/components/Login/Login.js"],"names":["React","useState","useEffect","useRef","Loading","useHistory","useDispatch","useSelector","signUp","signIn","initialState","firstname","lastname","email","confirmPassword","password","Login","isSignup","setisSignup","userData","setuserData","blob","setBlob","history","dispatch","authData","state","auth","ref","localStorage","getItem","push","handleSubmit","e","preventDefault","myForm","target","formData","FormData","Object","entries","key","value","trim","alert","type","payload","clear","handleBlob","files","current","reset","URL","createObjectURL","handleChange","name","setSignUp","prev","error","imageUrl","loading"],"mappings":"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","sourcesContent":["import React,{ useState, useEffect, useRef } from 'react';\r\nimport Loading from '../layout/Loading';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useDispatch,useSelector } from 'react-redux';\r\n\r\nimport {signUp,signIn} from '../../redux/actions/auth';\r\n\r\n// import GoogleSvg from '../layout/GoogleSvg';\r\n// import { GoogleLogin } from 'react-google-login';\r\n\r\nconst initialState = {firstname: '', lastname: '', email: '', confirmPassword: '', password: ''};\r\nconst Login = () => {\r\n \r\n    const [isSignup, setisSignup] = useState(false);\r\n    const [userData, setuserData] = useState(initialState);\r\n    const [blob, setBlob] = useState('');\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const authData = useSelector(state => state.auth);\r\n    const ref = useRef();\r\n\r\n    //Checks if the user is authenticated, then if its true redirect to homepage\r\n    useEffect(()=>{\r\n        if(localStorage.getItem('token')){\r\n        history.push('/');\r\n        }\r\n    },[history])\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        const myForm = e.target;\r\n        const formData = new FormData(myForm);\r\n\r\n        if(isSignup){\r\n            for(const [key, value] of Object.entries(userData)){\r\n                if(value.trim() === \"\") {\r\n                    return alert(`${key} is required!`);\r\n                }\r\n            }\r\n            if(userData.password.trim() !== userData.confirmPassword.trim()){\r\n                return dispatch({type:'ERROR', payload: {password:\"Password and Confirm Password doesn't match!\"}});\r\n            }\r\n            dispatch(signUp(formData,setisSignup,clear));\r\n        }else{\r\n            dispatch(signIn(userData,history));\r\n        } \r\n    }\r\n    const handleBlob = (e) => {\r\n        if(e.target.files[0].type !== \"image/jpg\" && e.target.files[0].type !== \"image/jpeg\" && e.target.files[0].type !== \"image/png\" ) {\r\n            ref.current.reset();\r\n            setBlob('');\r\n            return alert('File type not supported!');\r\n         }\r\n        setBlob(URL.createObjectURL(e.target.files[0]));\r\n       \r\n    }\r\n    const handleChange = (e) => {\r\n        setuserData({...userData, [e.target.name]: e.target.value });\r\n    }\r\n    const setSignUp = () => {\r\n        setisSignup(prev => !prev);\r\n        clear();\r\n        dispatch({type:'CLEAR_ERROR'});\r\n    }\r\n\r\n    const clear = () => {\r\n        setuserData({firstname: '', lastname: '', email: '', confirmPassword: '', password: ''});\r\n        setBlob('');\r\n    }\r\n    // Google Auth \r\n    // const googleSuccess = async (res) => {\r\n    //     const profile = res?.profileObj;\r\n    //     const token = res?.tokenId;\r\n    //     try{\r\n    //         dispatch({type: 'LOGIN', payload: {profile, token}});\r\n    //         history.push('/');\r\n    //     }catch(error){\r\n    //         console.log(error);\r\n    //     }\r\n    // }\r\n    // const googleFailure = async (error) => {\r\n    //     console.log(error);\r\n    //     console.log('Google Sign in failed.')\r\n    // } // Google Auth \r\n\r\n    return (\r\n        <div>\r\n            <div className=\"fixed m-4 z-40 text-sm text-gray-300 text-center bottom-0 right-0 underline\">\r\n                <a href=\"https://www.facebook.com/limnixon03292001/\">Developed By: Nixon A. Lim</a>\r\n            </div>\r\n\r\n            <div className=\"relative z-10 w-full max-w-full min-h-screen flex justify-center items-center border-red-500\"> \r\n\r\n                {/* <div className=\"space-y-1 ml-7 tracking-tight\">\r\n                    <p className=\" text-base\">Welcome! to</p>\r\n                    <h1 className=\"text-7xl font-bold\"><span>CONNECT</span> <sup className=\"text-md text-gray-600\">BETA</sup></h1>\r\n                    <p className=\"text-gray-600\">Why connect beta? i don't know either!</p>\r\n                </div> */}\r\n\r\n                <div className={`bg-white tracking-wide bg-opacity-13 px-8 py-9 rounded shadow md:w-96 h-auto space-y-10 m-2 ${isSignup && `md:w-1/2 lg:w-2/5 ` }`}>\r\n                \r\n                    <h1 className=\"text-3xl text-gray-600 text-center w-full\">{isSignup ? (blob === '' ? 'Sign Up': <img src={blob} alt={blob} className=\"rounded-full block w-24 h-24 m-auto object-cover\"/>) : \r\n                    <div className=\"\"><span className=\"text-xs\">Welcome to</span><p className=\"text-3xl\">Connect!</p></div>  } </h1>\r\n                    <form className={`space-y-5 ${isSignup && `sm:space-y-2`}`} onSubmit={handleSubmit} ref={ref}>\r\n                        { isSignup &&  <div className=\"flex space-x-3\">\r\n                                <div className=\"flex-1\">\r\n                                    <label className=\"block text-gray-600 text-xs md:text-sm\">Firstname</label>\r\n                                    {authData.error?.firstname && <span className=\"text-red-400 text-xs\">{authData.error?.firstname}</span>}\r\n                                    <input type=\"text\" name=\"firstname\" placeholder=\"FirstName\" className=\"w-full border border-gray-200 p-2 rounded mt-2 outline-none focus:border-blue-500\" onChange={handleChange} value={userData.firstname} required/>\r\n                                </div>\r\n                                <div className=\"flex-1\">\r\n                                    <label className=\"block text-gray-600 text-xs md:text-sm\">Lastname</label>\r\n                                    {authData.error?.lastname && <span className=\"text-red-400 text-xs\">{authData.error?.lastname}</span>}\r\n                                    <input type=\"text\" name=\"lastname\" placeholder=\"LastName\" className=\"w-full border border-gray-200 p-2 rounded mt-2 outline-none focus:border-blue-500\" onChange={handleChange} value={userData.lastname} required/>\r\n                                </div>\r\n                            </div> }\r\n\r\n                        <div>\r\n                            <label className=\"block text-gray-600 text-xs md:text-sm\">Email</label>\r\n                            {authData.error?.email && <span className=\"text-red-400 text-xs\">{authData.error?.email}</span>}\r\n                            <input type=\"text\" name=\"email\" placeholder=\"Email\" className=\"w-full border border-gray-200 p-2 rounded mt-2 outline-none focus:border-blue-500\" onChange={handleChange} value={userData.email} required/>\r\n                        </div>\r\n                        \r\n                        <div>\r\n                            <label className=\"block text-gray-600 text-xs md:text-sm\">Password</label>\r\n                            {authData.error?.password && <span className=\"text-red-400 text-xs\">{authData.error?.password}</span>}\r\n                            <input type=\"password\" name=\"password\" placeholder=\"Password\" className=\"w-full border border-gray-200 p-2 rounded mt-2 outline-none focus:border-blue-500\" onChange={handleChange} value={userData.password} required />\r\n                        </div>\r\n\r\n                        { isSignup && <div className=\"space-y-3\">\r\n                            <label className=\"block text-gray-600 text-xs md:text-sm\">Confirm Password</label>\r\n                            {authData.error?.confirmPassword && <span className=\"text-red-400 text-xs\">{authData.error?.confirmPassword}</span>}\r\n                            <input type=\"password\" name=\"confirmPassword\" placeholder=\"Confirm Password\" className=\"w-full border border-gray-200 p-2 rounded mt-2 outline-none focus:border-blue-500\" onChange={handleChange} value={userData.confirmPassword} required />\r\n                            <div >\r\n                                {authData.error?.imageUrl && <span className=\"text-red-400 text-xs\">{authData.error?.imageUrl}</span>}\r\n                                <div className=\"flex items-center md:gap-2\">\r\n                                    <label className=\"block text-gray-600 text-xs md:text-sm\">Upload Picture:</label>\r\n                                        <div className=\"text-xs md:text-sm p-2 text-gray-600 cursor-pointer \">\r\n                                            <input type=\"file\" name=\"image\" onChange={handleBlob} />\r\n                                        </div>\r\n                                        <p></p>\r\n                                </div>\r\n                            </div>\r\n                               \r\n                        </div>}\r\n                     \r\n                        { isSignup ?  <div className=\"space-y-3\">\r\n                            <button className=\"bg-purple-700 hover:bg-purple-400 text-white text-lg px-4 py-2 rounded block w-full active:bg-purple-300 transition ease-in duration-75\"><span className=\"flex justify-center items-center text-md md:text-lg\">Sign Up</span></button>\r\n                        </div> :  <div className=\"space-y-3\">\r\n                            <button className=\"bg-purple-700 hover:bg-purple-400 text-white px-4 py-2 rounded block w-full active:bg-purple-500 transition ease-in duration-75 text-md md:text-lg\">Login</button>\r\n                            {/* Google Auth */}\r\n                            {/* <p className=\"text-gray-600 text-center\">or</p>\r\n                            <GoogleLogin\r\n                                clientId=\"215946000983-n9blufh4c7sac7q7ia3qkrhmjvu13h4n.apps.googleusercontent.com\"\r\n                                render={(renderProps) => (\r\n                                    <button onClick={renderProps.onClick} disabled={renderProps.disabled} className=\"bg-white hover:bg-gray-100 border border-gray-200 text-gray-600 text-lg px-4 py-2 rounded block w-full active:bg-gray-200 transition ease-in duration-75\"><span className=\"flex justify-center items-center\"> <GoogleSvg />\r\n                                    Login with Google</span></button>\r\n                                )}\r\n                                onSuccess={googleSuccess}\r\n                                onFailure={googleFailure}\r\n                                cookiePolicy={'single_host_origin'}\r\n                            /> */}  {/* Google Auth */}\r\n                        </div> }\r\n                                \r\n                    </form>\r\n                                    \r\n                    <p className=\"text-gray-500 text-xs text-center cursor-pointer mt-1\"\r\n                     onClick={setSignUp} >\r\n                       {isSignup ? \" Already have an account?\" : \"Don't have an account? Click here to Sign up!\" }   </p>\r\n                </div>\r\n                {authData.loading && <Loading /> } \r\n            </div>\r\n        </div>\r\n                \r\n    );\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}