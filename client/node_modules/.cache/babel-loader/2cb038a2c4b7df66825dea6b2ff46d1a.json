{"ast":null,"code":"import React,{useEffect}from'react';import{useLocation,Link,useHistory}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';// import { searchUser } from '../../../redux/actions/users';\nimport Search from'../../layout/Search';import loadingCat from\"../../../svg/loadingCat.svg\";import defaultImage from'../../../svg/defaultImage.jpg';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MiddleSearch=function MiddleSearch(){var _useLocation=useLocation(),search=_useLocation.search;var query=new URLSearchParams(search);var searchData=query.get('user');var dispatch=useDispatch();var history=useHistory();var user=useSelector(function(state){return state.users;});useEffect(function(){// dispatch(searchUser(searchData));\nvar CancelToken=axios.CancelToken;var cancel;dispatch({type:'SEARCH_LOADING'});axios.get(\"/users/search?q=\".concat(searchData),{cancelToken:new CancelToken(function executor(c){// An executor function receives a cancel function as a parameter\ncancel=c;})}).then(function(_ref){var data=_ref.data;dispatch({type:'SEARCH_USER',payload:data});}).catch(function(error){if(axios.isCancel(error)){console.log('Request Canceled sa search2');}else{var _error$response;dispatch({type:'ERRORS',payload:error});if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){dispatch({type:'LOGOUT'});history.push('/login');}}});return function(){return cancel();};},[dispatch,searchData,history]);return/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-9 xl:col-span-6 col-span-full space-y-5 mb-16 md:mb-0\",children:[/*#__PURE__*/_jsx(Search,{}),user.searchLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center space-y-3\",children:[/*#__PURE__*/_jsx(\"img\",{src:loadingCat,alt:\"loading...\",className:\"h-18 w-18 object-cover\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Looking for \",searchData]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl text-gray-200 mb-2\",children:[\"Search: \",searchData]}),user.searchUser.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"User doesn't exist.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:user.searchUser.map(function(user){return/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-20 z-10 relative overflow-hidden rounded-md shadow\",children:/*#__PURE__*/_jsxs(Link,{to:\"/profile/\".concat(user._id),children:[(user===null||user===void 0?void 0:user.coverPhoto)&&/*#__PURE__*/_jsx(\"img\",{src:user.coverPhoto,alt:\"\",className:\"object-cover object-center w-full h-full opacity-40\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4 items-center space-y-3  absolute inset-0 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-full rounded-tl-md rounded-bl-md\",children:(user===null||user===void 0?void 0:user.imageUrl)?/*#__PURE__*/_jsx(\"img\",{src:user===null||user===void 0?void 0:user.imageUrl,alt:\"\",className:\"w-full h-full object-cover object-center\"}):/*#__PURE__*/_jsx(\"img\",{src:defaultImage,alt:\"\",className:\"w-full h-full object-cover object-center\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-center\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-sm font-semibold text-white\",children:[user===null||user===void 0?void 0:user.firstname,\" \",user===null||user===void 0?void 0:user.lastname]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-200\",children:user===null||user===void 0?void 0:user.email})]})]})]})},user._id);})})]})]});};export default MiddleSearch;","map":{"version":3,"sources":["C:/Users/Lim/Desktop/Clone/login-mern/client/src/components/Search/components/MiddleSearch.js"],"names":["React","useEffect","useLocation","Link","useHistory","useDispatch","useSelector","Search","defaultImage","axios","MiddleSearch","search","query","URLSearchParams","searchData","get","dispatch","history","user","state","users","CancelToken","cancel","type","cancelToken","executor","c","then","data","payload","catch","error","isCancel","console","log","response","status","push","searchLoading","loadingCat","searchUser","length","map","_id","coverPhoto","imageUrl","firstname","lastname","email"],"mappings":"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","sourcesContent":["import React,{useEffect} from 'react';\r\nimport { useLocation, Link, useHistory } from 'react-router-dom';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\n// import { searchUser } from '../../../redux/actions/users';\r\n\r\nimport Search from '../../layout/Search';\r\nimport loadingCat from '../../../svg/loadingCat.svg';\r\nimport defaultImage from '../../../svg/defaultImage.jpg';\r\n\r\nimport axios from 'axios';\r\n\r\nconst MiddleSearch = () => {\r\n    const {search} = useLocation();\r\n    const query = new URLSearchParams(search);\r\n    const searchData = query.get('user');\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n\r\n    const user = useSelector(state => state.users);\r\n\r\n    useEffect(()=>{\r\n\r\n        // dispatch(searchUser(searchData));\r\n\r\n        const CancelToken = axios.CancelToken;\r\n        let cancel;\r\n        dispatch({type: 'SEARCH_LOADING'});\r\n        axios.get(`/users/search?q=${searchData}`, { cancelToken: new CancelToken(function executor(c) {\r\n            // An executor function receives a cancel function as a parameter\r\n            cancel = c;\r\n        })}).then(({data})=>{\r\n            dispatch({type: 'SEARCH_USER', payload: data});\r\n        }).catch((error) => {\r\n            if (axios.isCancel(error)) {\r\n                console.log('Request Canceled sa search2'); \r\n            }\r\n            else{\r\n                dispatch({type:'ERRORS', payload: error});\r\n                if(error.response?.status === 401){\r\n                    dispatch({type: 'LOGOUT'});\r\n                    history.push('/login');\r\n                }\r\n            }\r\n        });\r\n\r\n       return () => cancel();\r\n    },[dispatch,searchData,history]);\r\n\r\n    return (\r\n        <div className=\"lg:col-span-9 xl:col-span-6 col-span-full space-y-5 mb-16 md:mb-0\">\r\n            <Search />\r\n        {user.searchLoading ?\r\n        <div className=\"flex flex-col items-center space-y-3\">\r\n            <img src={loadingCat} alt=\"loading...\" className=\"h-18 w-18 object-cover\"/>\r\n            <p>Looking for {searchData}</p>\r\n        </div> : \r\n        <div className=\"space-y-3\">\r\n            <p className=\"text-2xl text-gray-200 mb-2\">Search: {searchData}</p>\r\n            {/* checking the array if theres a data  */}\r\n           { user.searchUser.length === 0 ? <p>User doesn't exist.</p> :\r\n           <div className=\"space-y-3\">\r\n            {user.searchUser.map((user) => (\r\n                <div key={user._id} className=\"w-full h-20 z-10 relative overflow-hidden rounded-md shadow\">\r\n                  <Link to={`/profile/${user._id}`}>\r\n                      {user?.coverPhoto &&  <img src={user.coverPhoto} alt=\"\" className=\"object-cover object-center w-full h-full opacity-40\"/>}\r\n                 \r\n                      <div className=\"flex gap-4 items-center space-y-3  absolute inset-0 overflow-hidden\">\r\n                          <div className=\"w-20 h-full rounded-tl-md rounded-bl-md\">\r\n                            {user?.imageUrl ? <img src={user?.imageUrl} alt=\"\" className=\"w-full h-full object-cover object-center\" /> : <img src={defaultImage} alt=\"\" className=\"w-full h-full object-cover object-center\" />}\r\n                          </div>\r\n                          <div className=\"flex flex-col justify-center\">\r\n                              <h1 className=\"text-sm font-semibold text-white\">{user?.firstname} {user?.lastname}</h1>\r\n                              <p className=\"text-xs text-gray-200\">{user?.email}</p>\r\n                          </div>\r\n                      </div>\r\n                  </Link>\r\n              </div>\r\n            ))}\r\n            </div>}\r\n        </div>\r\n        }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MiddleSearch\r\n"]},"metadata":{},"sourceType":"module"}