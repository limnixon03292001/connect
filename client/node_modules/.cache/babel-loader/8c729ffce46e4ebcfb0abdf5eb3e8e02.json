{"ast":null,"code":"import _slicedToArray from\"C:/Users/Lim/Desktop/Clone/login-mern/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from'react';import{useDispatch}from'react-redux';import CancelIcon from\"../.././svg/cancel2.svg\";import loadingCat from\"../.././svg/loadingCat.svg\";import{updateCoverPhoto}from'../../redux/actions/users';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CoverPhotoModal=function CoverPhotoModal(_ref){var _userInfo$user;var setModal=_ref.setModal,userInfo=_ref.userInfo;var _useState=useState((_userInfo$user=userInfo.user)===null||_userInfo$user===void 0?void 0:_userInfo$user.coverPhoto),_useState2=_slicedToArray(_useState,2),coverPhotoData=_useState2[0],setcoverPhotoData=_useState2[1];var dispatch=useDispatch();var ref=useRef();var handleChange=function handleChange(e){if(e.target.files[0].type!==\"image/jpg\"&&e.target.files[0].type!==\"image/jpeg\"&&e.target.files[0].type!==\"image/png\"){ref.current.reset();setcoverPhotoData(null);return alert('File type not supported!');}setcoverPhotoData(URL.createObjectURL(e.target.files[0]));};var resetCoverPhotoData=function resetCoverPhotoData(){setcoverPhotoData(null);ref.current.reset();};var handleSubmit=function handleSubmit(e){var _userInfo$user2;e.preventDefault();var myForm=e.target;var formData=new FormData(myForm);formData.append('imgUrl',coverPhotoData);dispatch(updateCoverPhoto((_userInfo$user2=userInfo.user)===null||_userInfo$user2===void 0?void 0:_userInfo$user2._id,formData,setModal));};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-40 w-full h-full flex justify-center items-center bg-black bg-opacity-25 overflow-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-primary m-2 w-full md:w-96 h-auto shadow-md border border-borderColor rounded-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 flex justify-between items-center border-b border-borderColor tracking-wide font-light\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-1 text-md md:text-lg\",children:\"Change Cover Photo\"}),!userInfo.userUpdateLoading&&/*#__PURE__*/_jsx(\"button\",{className:\"hover:bg-white hover:bg-opacity-10 active:bg-white active:bg-opacity-25 rounded-full p-2 transition ease-in duration-75\",onClick:function onClick(){return setModal(function(prev){return!prev;});},children:/*#__PURE__*/_jsx(\"img\",{src:CancelIcon,alt:\"\",className:\"h-4 w-4\"})})]}),userInfo.userUpdateLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 w-full h-full flex flex-col items-center justify-center space-y-2\",children:[/*#__PURE__*/_jsx(\"img\",{src:loadingCat,alt:\"\",className:\"w-14 h-14\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Updating...Meow!!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-light text-gray-400\",children:\"Full page reload after..\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[coverPhotoData&&/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-52 md:h-64 p-3 overflow-auto relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:coverPhotoData,alt:\"Cover\",className:\"rounded-md bg-purple-400 object-cover object-center h-full w-full\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"bg-gray-600 bg-opacity-30 shadow-md hover:bg-gray-500 hover:bg-opacity-30  active:bg-white active:bg-opacity-25 rounded-full p-2 transition ease-in duration-75 absolute top-0 right-0 m-3\",children:[\"  \",/*#__PURE__*/_jsx(\"img\",{src:CancelIcon,alt:\"\",className:\"w-4 h-4 rounded-md\",onClick:resetCoverPhotoData}),\" \"]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,ref:ref,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 items-center self-start m-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs md:text-sm break-words \",children:\"Cover Photo:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs md:text-sm relative overflow-hidden\",children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"image\",onChange:handleChange})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-button2 rounded-b-md mt-2 py-1 px-1 w-full text-center font-light text-md md:text-lg\",children:\"Save Changes\"})]})]})]})});};export default CoverPhotoModal;","map":{"version":3,"sources":["C:/Users/Lim/Desktop/Clone/login-mern/client/src/components/layout/CoverPhotoModal.js"],"names":["React","useState","useRef","useDispatch","updateCoverPhoto","CoverPhotoModal","setModal","userInfo","user","coverPhoto","coverPhotoData","setcoverPhotoData","dispatch","ref","handleChange","e","target","files","type","current","reset","alert","URL","createObjectURL","resetCoverPhotoData","handleSubmit","preventDefault","myForm","formData","FormData","append","_id","userUpdateLoading","prev","CancelIcon","loadingCat"],"mappings":"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","sourcesContent":["import React, {useState, useRef} from 'react'\r\nimport {useDispatch} from 'react-redux';\r\n\r\nimport CancelIcon from '../.././svg/cancel2.svg';\r\nimport loadingCat from '../.././svg/loadingCat.svg';\r\nimport { updateCoverPhoto } from '../../redux/actions/users';\r\n\r\nconst CoverPhotoModal = ({setModal, userInfo}) => {\r\n    const [coverPhotoData, setcoverPhotoData] = useState(userInfo.user?.coverPhoto);\r\n    const dispatch = useDispatch();\r\n    const ref = useRef();\r\n\r\n    const handleChange = (e) => {\r\n        if(e.target.files[0].type !== \"image/jpg\" && e.target.files[0].type !== \"image/jpeg\" && e.target.files[0].type !== \"image/png\" ) {\r\n            ref.current.reset();\r\n            setcoverPhotoData(null);\r\n            return alert('File type not supported!');\r\n         }\r\n        setcoverPhotoData(URL.createObjectURL(e.target.files[0]));\r\n    }\r\n\r\n    const resetCoverPhotoData = () => {\r\n        setcoverPhotoData(null);\r\n        ref.current.reset();\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        const myForm = e.target;\r\n        const formData = new FormData(myForm);\r\n        formData.append('imgUrl', coverPhotoData);\r\n        dispatch(updateCoverPhoto(userInfo.user?._id, formData, setModal));\r\n    }\r\n\r\n\r\n    return (\r\n            <div className=\"fixed inset-0 z-40 w-full h-full flex justify-center items-center bg-black bg-opacity-25 overflow-auto\" >\r\n                <div className=\"bg-primary m-2 w-full md:w-96 h-auto shadow-md border border-borderColor rounded-md\">\r\n                    <div className=\"p-2 flex justify-between items-center border-b border-borderColor tracking-wide font-light\">\r\n                        <div className=\"p-1 text-md md:text-lg\">Change Cover Photo</div>\r\n                        {!userInfo.userUpdateLoading && \r\n                        <button className=\"hover:bg-white hover:bg-opacity-10 active:bg-white active:bg-opacity-25 rounded-full p-2 transition ease-in duration-75\" onClick={() => setModal(prev => !prev)}><img src={CancelIcon} alt=\"\" className=\"h-4 w-4\" /></button> \r\n                        }\r\n                    </div>\r\n\r\n                    {/* fires during update  */}\r\n                    {userInfo.userUpdateLoading ? \r\n                        <div className=\"p-4 w-full h-full flex flex-col items-center justify-center space-y-2\">\r\n                            <img src={loadingCat} alt=\"\" className=\"w-14 h-14\" /> \r\n                            <p>Updating...Meow!!</p>\r\n                            <p className=\"text-sm font-light text-gray-400\">Full page reload after..</p>\r\n                        </div> :\r\n                        <>\r\n                            {coverPhotoData && \r\n                                <div className=\"w-full h-52 md:h-64 p-3 overflow-auto relative\">\r\n                                    <img src={coverPhotoData} alt=\"Cover\" className=\"rounded-md bg-purple-400 object-cover object-center h-full w-full\" />\r\n                                    <button className=\"bg-gray-600 bg-opacity-30 shadow-md hover:bg-gray-500 hover:bg-opacity-30  active:bg-white active:bg-opacity-25 rounded-full p-2 transition ease-in duration-75 absolute top-0 right-0 m-3\">  <img src={CancelIcon} alt=\"\" className=\"w-4 h-4 rounded-md\" onClick={ resetCoverPhotoData} /> </button>\r\n                                </div>}\r\n                            <form onSubmit={handleSubmit} ref={ref}>\r\n                                <div className=\"flex gap-2 items-center self-start m-3\">\r\n                                    <p className=\"text-xs md:text-sm break-words \">Cover Photo:</p>\r\n                                    <div className=\"text-xs md:text-sm relative overflow-hidden\">\r\n                                        <input type=\"file\" name=\"image\" onChange={handleChange} />\r\n                                    </div>\r\n                                </div>\r\n                                <button className=\"bg-button2 rounded-b-md mt-2 py-1 px-1 w-full text-center font-light text-md md:text-lg\">Save Changes</button> \r\n                            </form>\r\n                        </>\r\n                    }\r\n                </div>\r\n            </div>\r\n    )\r\n}\r\n\r\nexport default CoverPhotoModal\r\n"]},"metadata":{},"sourceType":"module"}