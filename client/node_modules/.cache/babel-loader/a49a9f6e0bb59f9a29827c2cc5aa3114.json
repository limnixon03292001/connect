{"ast":null,"code":"import _slicedToArray from\"C:/Users/Lim/Desktop/Clone/login-mern/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import{createCommentPost}from'../../../redux/actions/post';// fetchCommentPost\nimport loadingCat from\"../../../svg/loadingCat.svg\";import CancelIcon from\"../../../svg/cancel2.svg\";import rightArrow from\"../../../svg/right-arrow.svg\";import Comment from'./Comment';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialState={data:\"\"};var CommentModal=function CommentModal(_ref){var setModalX=_ref.setModalX,postID=_ref.postID,refx=_ref.refx;var post=useSelector(function(state){return state.posts.posts.find(function(posts){return posts._id===postID;});});// console.log(post);\nvar commentLoading=useSelector(function(state){return state.posts.createCommentLoading;});var loading=useSelector(function(state){return state.posts;});var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),commentData=_useState2[0],setCommentData=_useState2[1];var dispatch=useDispatch();useEffect(function(){// dispatch(fetchCommentPost(postID));\nconsole.log(\"Nagfefetch yung comment!\");var CancelToken=axios.CancelToken;var cancel;dispatch({type:'COMMENT_LOADING'});axios.get(\"/post/comment/\".concat(postID),{cancelToken:new CancelToken(function executor(c){cancel=c;})}).then(function(_ref2){var data=_ref2.data;dispatch({type:'COMMENT',payload:data});}).catch(function(error){if(axios.isCancel(error))console.log('Request Canceled, fetching comments');dispatch({type:'ERRORS',payload:error});});return function(){return cancel();};},[dispatch,postID]);var handleChange=function handleChange(e){setCommentData({data:e.target.value});};var handleSubmit=function handleSubmit(e){e.preventDefault();dispatch(createCommentPost(postID,commentData));setCommentData({data:\"\"});};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-y-0 inset-x-0 z-40 w-full h-full flex justify-center items-center bg-black bg-opacity-25 overflow-auto\",id:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-primary rounded-md w-full md:w-2/4 max-w-screen-md m-3 border border-borderColor shadow-md\",id:\"inner\",ref:refx,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 items-center justify-between py-2 px-1 md:py-4 md:px-2 border-b border-borderColor\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2 pl-2\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl\",children:\"Comments\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"hover:bg-white hover:bg-opacity-10 active:bg-white active:bg-opacity-25 rounded-full  p-2 transition ease-in duration-75\",onClick:function onClick(){return setModalX(function(prev){return!prev;});},children:/*#__PURE__*/_jsx(\"img\",{src:CancelIcon,alt:\"\",className:\"h-4 w-4\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-auto h-72 p-3\",children:loading.commentLoading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center w-full h-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"img\",{src:loadingCat,alt:\"\",className:\"h-14 w-14 m-auto \"}),/*#__PURE__*/_jsx(\"p\",{children:\"Collecting comments...\"})]})}):(post===null||post===void 0?void 0:post.comment.length)===0?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center w-full h-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No Comments found\"})})}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:post.comment.map(function(commentData){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Comment,{userComment:commentData,postID:postID})},commentData._id);})})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-2 w-full\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:function onSubmit(e){return handleSubmit(e);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"bg-secondary p-2 px-3 pr-10 h-auto w-full rounded-full outline-none resize-none breaks-words\",placeholder:\"Write something...\",name:\"commentData\",value:commentData.data,onChange:function onChange(e){return handleChange(e);}}),commentLoading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center rounded-full absolute right-2 top-0 bottom-0\",children:/*#__PURE__*/_jsx(\"img\",{src:loadingCat,alt:\"loading...\",className:\"h-6 w-6\"})}):/*#__PURE__*/_jsx(\"button\",{className:\"flex justify-center items-center rounded-full absolute right-2 top-0 bottom-0\",children:/*#__PURE__*/_jsx(\"img\",{src:rightArrow,alt:\"->\",className:\"h-6 w-6\"})})]})})})]})});};export default CommentModal;","map":{"version":3,"sources":["C:/Users/Lim/Desktop/Clone/login-mern/client/src/components/layout/Comment/CommentModal.js"],"names":["React","useState","useEffect","useSelector","useDispatch","createCommentPost","Comment","axios","initialState","data","CommentModal","setModalX","postID","refx","post","state","posts","find","_id","commentLoading","createCommentLoading","loading","commentData","setCommentData","dispatch","console","log","CancelToken","cancel","type","get","cancelToken","executor","c","then","payload","catch","error","isCancel","handleChange","e","target","value","handleSubmit","preventDefault","prev","CancelIcon","loadingCat","comment","length","map","rightArrow"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport { createCommentPost } from '../../../redux/actions/post';\r\n// fetchCommentPost\r\n\r\nimport loadingCat from '../../../svg/loadingCat.svg';\r\nimport CancelIcon from '../../../svg/cancel2.svg';\r\nimport rightArrow from '../../../svg/right-arrow.svg';\r\nimport Comment from './Comment';\r\n\r\nimport axios from 'axios';\r\n\r\nconst initialState = {data: \"\"};\r\nconst CommentModal = ({setModalX, postID, refx}) => {\r\n\r\n    const post = useSelector(state => state.posts.posts.find(posts => posts._id === postID));\r\n    // console.log(post);\r\n    const commentLoading = useSelector(state => state.posts.createCommentLoading);\r\n    const loading = useSelector(state => state.posts);\r\n    const [commentData, setCommentData] = useState(initialState);\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        // dispatch(fetchCommentPost(postID));\r\n        console.log(\"Nagfefetch yung comment!\");\r\n\r\n        const CancelToken = axios.CancelToken;\r\n        let cancel;\r\n\r\n        dispatch({type:'COMMENT_LOADING'});\r\n        axios.get(`/post/comment/${postID}`,{cancelToken: new CancelToken(function executor(c){\r\n            cancel = c;\r\n        })}).then(({data}) => {\r\n            dispatch({type: 'COMMENT', payload: data});\r\n        }).catch((error) => {\r\n            if(axios.isCancel(error)) console.log('Request Canceled, fetching comments');\r\n            dispatch({type: 'ERRORS', payload: error});\r\n        });\r\n\r\n        return () => cancel();\r\n    },[dispatch, postID]);\r\n\r\n    const handleChange = (e) => {\r\n        setCommentData({data: e.target.value});\r\n    }\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        dispatch(createCommentPost(postID, commentData));\r\n        setCommentData({data: \"\"});\r\n    }\r\n    return (\r\n        <div className=\"fixed inset-y-0 inset-x-0 z-40 w-full h-full flex justify-center items-center bg-black bg-opacity-25 overflow-auto\" id=\"modal\">\r\n            <div className=\"bg-primary rounded-md w-full md:w-2/4 max-w-screen-md m-3 border border-borderColor shadow-md\" id=\"inner\" ref={refx}>\r\n                <div className=\"flex gap-2 items-center justify-between py-2 px-1 md:py-4 md:px-2 border-b border-borderColor\">\r\n                    <div className=\"flex gap-2 pl-2\">\r\n                        <h1 className=\"text-xl\">Comments</h1>\r\n                    </div>\r\n                    <div>    \r\n                        <button className=\"hover:bg-white hover:bg-opacity-10 active:bg-white active:bg-opacity-25 rounded-full  p-2 transition ease-in duration-75\" onClick={()=> setModalX(prev => !prev)}><img src={CancelIcon} alt=\"\" className=\"h-4 w-4\" /></button> \r\n                    </div>\r\n                </div>\r\n\r\n                {/* COMMENT */}\r\n                <div className=\"overflow-auto h-72 p-3\">\r\n                    {loading.commentLoading ? \r\n                        <div className=\"flex justify-center items-center w-full h-full\">\r\n                            <div className=\"space-y-3\">\r\n                                <img src={loadingCat} alt=\"\" className=\"h-14 w-14 m-auto \"/>\r\n                                <p>Collecting comments...</p>\r\n                            </div>\r\n                        </div>\r\n                        : \r\n                        post?.comment.length === 0 ? \r\n                            <div className=\"flex justify-center items-center w-full h-full\">\r\n                                <div className=\"space-y-3\">\r\n                                    <p>No Comments found</p>\r\n                                </div>\r\n                            </div> \r\n                            :\r\n                            <div className=\"space-y-4\">\r\n                                {post.comment.map(commentData => (\r\n                                    <div key={commentData._id}>\r\n                                        <Comment userComment={commentData} postID={postID}/>\r\n                                    </div>\r\n                                ))}\r\n                            </div>    \r\n                    }\r\n                </div>\r\n\r\n                <div className=\"p-2 w-full\">\r\n                    <form onSubmit={(e) => handleSubmit(e)}>\r\n                        <div className=\"relative\">\r\n                            <input type=\"text\" className=\"bg-secondary p-2 px-3 pr-10 h-auto w-full rounded-full outline-none resize-none breaks-words\" placeholder=\"Write something...\" name=\"commentData\" value={commentData.data} onChange={(e) => handleChange(e)}/>\r\n                            {commentLoading ? \r\n                            <div className=\"flex justify-center items-center rounded-full absolute right-2 top-0 bottom-0\">\r\n                                <img src={loadingCat} alt=\"loading...\" className=\"h-6 w-6\" />\r\n                            </div>\r\n                            :\r\n                                <button className=\"flex justify-center items-center rounded-full absolute right-2 top-0 bottom-0\"> \r\n                                    <img src={rightArrow} alt=\"->\" className=\"h-6 w-6\" />\r\n                                </button>\r\n                            }\r\n                        \r\n                        </div>\r\n                    </form>\r\n                </div>\r\n               \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CommentModal\r\n"]},"metadata":{},"sourceType":"module"}