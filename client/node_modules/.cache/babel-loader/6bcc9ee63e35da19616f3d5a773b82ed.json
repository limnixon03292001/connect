{"ast":null,"code":"import _objectSpread from\"C:/Users/Lim/Desktop/Clone/login-mern/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/Lim/Desktop/Clone/login-mern/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from'react';import EditIcon from\"../../svg/edit.svg\";import loadingCat from\"../../svg/loadingCat.svg\";import CancelIcon from\"../../svg/cancel2.svg\";import{useDispatch,useSelector}from'react-redux';import{updatePost}from'../../redux/actions/post';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditModal=function EditModal(_ref){var setSmallModal=_ref.setSmallModal,post=_ref.post,editModal=_ref.editModal;var _useState=useState({description:post.description}),_useState2=_slicedToArray(_useState,2),updateData=_useState2[0],setupdateData=_useState2[1];var _useState3=useState(post.postImg),_useState4=_slicedToArray(_useState3,2),blob=_useState4[0],setBlob=_useState4[1];var dispatch=useDispatch();var postsState=useSelector(function(state){return state.posts;});var ref=useRef();var modalHandler=function modalHandler(){setupdateData({description:'',postImg:''});setSmallModal(false);};var handleBlob=function handleBlob(e){if(e.target.files[0].type!==\"image/jpg\"&&e.target.files[0].type!==\"image/jpeg\"&&e.target.files[0].type!==\"image/png\"){ref.current.reset();setBlob('');return alert('File type not supported!');}setBlob(URL.createObjectURL(e.target.files[0]));};var resetBlob=function resetBlob(){setBlob('');ref.current.reset();};var handleUpdate=function handleUpdate(e){e.preventDefault();var myForm=e.target;var formData=new FormData(myForm);formData.append('imgUrl',blob);if(updateData.description.trim()===''&&blob===''){return alert('Input some content!');}dispatch(updatePost(post._id,formData,modalHandler));};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-y-0 inset-x-0 z-50 w-full h-full \".concat(editModal?\"flex\":\"hidden\",\" justify-center items-center bg-black bg-opacity-25 overflow-auto\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-primary rounded-md w-full md:w-2/4 max-w-screen-md m-3 border border-borderColor shadow-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 items-center justify-between py-2 px-1 md:py-4 md:px-2 border-b border-borderColor\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 pl-2\",children:[/*#__PURE__*/_jsx(\"img\",{src:EditIcon,alt:\"\",className:\" w-5 h-5\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-light\",children:\"Edit post\"})]}),/*#__PURE__*/_jsx(\"div\",{children:postsState.updateLoading?'':/*#__PURE__*/_jsx(\"button\",{className:\"hover:bg-white hover:bg-opacity-10 active:bg-white active:bg-opacity-25 rounded-full  p-2 transition ease-in duration-75\",onClick:modalHandler,children:/*#__PURE__*/_jsx(\"img\",{src:CancelIcon,alt:\"\",className:\"h-4 w-4\"})})})]}),/*#__PURE__*/_jsx(\"div\",{children:postsState.updateLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-center items-center p-4\",children:[/*#__PURE__*/_jsx(\"img\",{src:loadingCat,alt:\"loading...\",className:\"w-16 h-16\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-md\",children:\"Updating... Meow!\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"relative h-auto overflow-auto\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpdate,ref:ref,children:[/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Create Post...\",cols:\"30\",rows:\"3\",className:\"w-full h-40 bg-primary p-3 focus:outline-none inset-0 m-0 rounded-t-md resize-none relative align-top overflow-auto\",name:\"description\",defaultValue:updateData.description,onChange:function onChange(e){return setupdateData(_objectSpread(_objectSpread({},updateData),{},{description:e.target.value}));}}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 bg-primary p-3 rounded-md\",children:[blob&&/*#__PURE__*/_jsxs(\"div\",{className:\"relative h-52 overflow-auto\",children:[/*#__PURE__*/_jsx(\"img\",{src:blob,alt:blob,className:\"rounded-md object-cover w-full max-h-37 bg-\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-600 bg-opacity-30 shadow-md hover:bg-gray-500 hover:bg-opacity-30  active:bg-white active:bg-opacity-25 rounded-full p-2 transition ease-in duration-75 absolute top-0 right-0 m-2 cursor-pointer\",onClick:resetBlob,children:[\" \",/*#__PURE__*/_jsx(\"img\",{src:CancelIcon,alt:\"\",className:\"w-4 h-4 rounded-md \"}),\" \"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-end gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 items-center text-xs md:text-sm relative object-cover cursor-pointer overflow-hidden w-full\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-md\",children:\"Upload Picture:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"image\",onChange:handleBlob})]}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-button2 hover:bg-purple-400 active:bg-purple-500 rounded-md p-1 py-2 p transition ease-in duration-75 cursor-pointer w-full text-sm md:text-lg font-light\",children:\" Update Post\"})]})]})]})})})]})});};export default EditModal;","map":{"version":3,"sources":["C:/Users/Lim/Desktop/Clone/login-mern/client/src/components/layout/EditModal.js"],"names":["React","useState","useRef","useDispatch","useSelector","updatePost","EditModal","setSmallModal","post","editModal","description","updateData","setupdateData","postImg","blob","setBlob","dispatch","postsState","state","posts","ref","modalHandler","handleBlob","e","target","files","type","current","reset","alert","URL","createObjectURL","resetBlob","handleUpdate","preventDefault","myForm","formData","FormData","append","trim","_id","EditIcon","updateLoading","CancelIcon","loadingCat","value"],"mappings":"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","sourcesContent":["import React,{ useState, useRef } from 'react'\r\n\r\nimport EditIcon from '../../svg/edit.svg';\r\nimport loadingCat from '../../svg/loadingCat.svg';\r\nimport CancelIcon from '../../svg/cancel2.svg';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { updatePost } from '../../redux/actions/post';\r\n\r\n\r\nconst EditModal = ({setSmallModal, post, editModal }) => {\r\n    const [updateData, setupdateData] = useState({description: post.description});\r\n    const [blob, setBlob] = useState(post.postImg);\r\n    const dispatch = useDispatch();\r\n    const postsState = useSelector(state => state.posts)\r\n    const ref = useRef();\r\n\r\n    const modalHandler = () => {\r\n        setupdateData({description:'', postImg:''});\r\n        setSmallModal(false);\r\n    }\r\n    const handleBlob = (e) => {\r\n        if(e.target.files[0].type !== \"image/jpg\" && e.target.files[0].type !== \"image/jpeg\" && e.target.files[0].type !== \"image/png\" ) {\r\n            ref.current.reset();\r\n            setBlob('');\r\n            return alert('File type not supported!');\r\n         }\r\n        setBlob(URL.createObjectURL(e.target.files[0]));\r\n    }\r\n\r\n    const resetBlob = () => {\r\n        setBlob('');\r\n        ref.current.reset();\r\n    }\r\n\r\n    const handleUpdate = (e) => {\r\n        e.preventDefault();\r\n\r\n        const myForm = e.target;\r\n        const formData = new FormData(myForm);\r\n        formData.append('imgUrl', blob);\r\n\r\n        if(updateData.description.trim() === '' && blob === ''){\r\n            return alert('Input some content!');\r\n        }\r\n    \r\n        dispatch(updatePost(post._id,formData, modalHandler));\r\n    }\r\n\r\n  \r\n    return (\r\n         <div className={`fixed inset-y-0 inset-x-0 z-50 w-full h-full ${editModal ? `flex` : `hidden` } justify-center items-center bg-black bg-opacity-25 overflow-auto`}>\r\n            <div className=\"bg-primary rounded-md w-full md:w-2/4 max-w-screen-md m-3 border border-borderColor shadow-md\">\r\n                <div className=\"flex gap-2 items-center justify-between py-2 px-1 md:py-4 md:px-2 border-b border-borderColor\">\r\n                    <div className=\"flex items-center justify-center gap-2 pl-2\">\r\n                        <img src={EditIcon} alt=\"\" className=\" w-5 h-5\" />  \r\n                        <h1 className=\"text-xl font-light\">Edit post</h1>\r\n                    </div>\r\n                    <div>\r\n                        {postsState.updateLoading ? '' :      \r\n                        <button className=\"hover:bg-white hover:bg-opacity-10 active:bg-white active:bg-opacity-25 rounded-full  p-2 transition ease-in duration-75\" onClick={modalHandler}><img src={CancelIcon} alt=\"\" className=\"h-4 w-4\" /></button> }\r\n                   \r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    {postsState.updateLoading ? \r\n                    <div className=\"flex flex-col justify-center items-center p-4\">\r\n                        <img src={loadingCat} alt=\"loading...\" className=\"w-16 h-16\" />\r\n                        <p className=\"text-md\">Updating... Meow!</p>\r\n                    </div> : \r\n                    <div className=\"relative h-auto overflow-auto\">\r\n                        <form onSubmit={handleUpdate} ref={ref}>\r\n                            <textarea placeholder=\"Create Post...\" cols=\"30\" rows=\"3\" className=\"w-full h-40 bg-primary p-3 focus:outline-none inset-0 m-0 rounded-t-md resize-none relative align-top overflow-auto\" name=\"description\" defaultValue={updateData.description} onChange={(e) => setupdateData({...updateData, description: e.target.value})} ></textarea> \r\n\r\n                            <div className=\"space-y-3 bg-primary p-3 rounded-md\">\r\n                                {/* if theres an image go here */}\r\n                                {blob && <div className=\"relative h-52 overflow-auto\">\r\n                                    <img src={blob} alt={blob} className=\"rounded-md object-cover w-full max-h-37 bg-\"/>\r\n                                    <div className=\"bg-gray-600 bg-opacity-30 shadow-md hover:bg-gray-500 hover:bg-opacity-30  active:bg-white active:bg-opacity-25 rounded-full p-2 transition ease-in duration-75 absolute top-0 right-0 m-2 cursor-pointer\" onClick={resetBlob}> <img src={CancelIcon} alt=\"\" className=\"w-4 h-4 rounded-md \"  /> </div>\r\n                                </div> }\r\n                                    <div className=\"flex flex-col items-center justify-end gap-3\">\r\n                                        <div className=\"flex gap-2 items-center text-xs md:text-sm relative object-cover cursor-pointer overflow-hidden w-full\">\r\n                                            <p className=\"text-md\">Upload Picture:</p>\r\n                                            <input type=\"file\" name=\"image\" onChange={handleBlob} />\r\n                                        </div>\r\n                                        <button className=\"bg-button2 hover:bg-purple-400 active:bg-purple-500 rounded-md p-1 py-2 p transition ease-in duration-75 cursor-pointer w-full text-sm md:text-lg font-light\"> Update Post</button> \r\n                                    </div>\r\n                            </div>\r\n                        </form>\r\n                    </div> }\r\n                    \r\n                </div>\r\n              \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditModal\r\n"]},"metadata":{},"sourceType":"module"}