{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lim\\\\Desktop\\\\Clone\\\\login-mern\\\\client\\\\src\\\\components\\\\Homepage\\\\components\\\\Post\\\\Post.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport moment from 'moment';\nimport { Link } from 'react-router-dom';\nimport MoreIcon from \"../../../../svg/ellipsis.svg\";\nimport Modal from '../../../layout/Modal';\nimport { deletePost, likePost } from '../../../../redux/actions/post';\nimport CommentModal from '../../../layout/Comment/CommentModal';\nimport { useModalCloser, useSmallModalCloser } from '../../../../customHooks/hooks';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Post = ({\n  post\n}) => {\n  _s();\n\n  var _post$users, _post$users2, _post$users3, _post$users4, _post$users5, _post$users6, _user$authData2;\n\n  const dispatch = useDispatch();\n  const postState = useSelector(state => state.posts); //checking the owners post\n\n  const user = useSelector(state => state.auth);\n\n  const handleDelete = () => {\n    dispatch(deletePost(post._id));\n  }; // inserting post.likes to like state\n\n\n  const [likes, setLikes] = useState(post.likes); //check if user already liked the post\n\n  const hasLikedPost = likes === null || likes === void 0 ? void 0 : likes.some(like => {\n    var _user$authData;\n\n    return like === ((_user$authData = user.authData) === null || _user$authData === void 0 ? void 0 : _user$authData._id);\n  }); //Dispatching like \n\n  const handleLike = () => {\n    dispatch(likePost(post._id));\n\n    if (hasLikedPost) {\n      setLikes(post.likes.filter(id => id !== user.authData._id));\n    } else {\n      setLikes([...post.likes, user.authData._id]);\n    }\n  };\n\n  const NumberLike = () => {\n    if ((likes === null || likes === void 0 ? void 0 : likes.length) > 0) {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-md text-white\",\n        children: [likes === null || likes === void 0 ? void 0 : likes.length, \" \", (likes === null || likes === void 0 ? void 0 : likes.length) > 1 ? 'Likes' : 'Like']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 20\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 17\n    }, this);\n  };\n\n  const NumberComment = () => {\n    var _post$comment;\n\n    if ((post === null || post === void 0 ? void 0 : (_post$comment = post.comment) === null || _post$comment === void 0 ? void 0 : _post$comment.length) > 0) {\n      var _post$comment2, _post$comment3;\n\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [post === null || post === void 0 ? void 0 : (_post$comment2 = post.comment) === null || _post$comment2 === void 0 ? void 0 : _post$comment2.length, \" \", (post === null || post === void 0 ? void 0 : (_post$comment3 = post.comment) === null || _post$comment3 === void 0 ? void 0 : _post$comment3.length) > 1 ? 'Comments' : 'Comment']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 20\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      children: \"Comment\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 16\n    }, this);\n  };\n\n  const {\n    ref,\n    modalX,\n    setModalX\n  } = useModalCloser(false);\n  const {\n    smallRef,\n    smallModal,\n    setSmallModal\n  } = useSmallModalCloser(false);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-primary rounded-md space-y-3 relative -z-10 overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-3 p-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: (_post$users = post.users) === null || _post$users === void 0 ? void 0 : _post$users.imageUrl,\n        alt: (_post$users2 = post.users) === null || _post$users2 === void 0 ? void 0 : _post$users2.imageUrl,\n        className: \"w-11 h-11 md:w-12 md:h-12  rounded-full object-cover  mx-0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"leading-none mr-auto self-center space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: `/profile/${(_post$users3 = post.users) === null || _post$users3 === void 0 ? void 0 : _post$users3._id}`,\n          className: \"text-md font-semibold block\",\n          children: [(_post$users4 = post.users) === null || _post$users4 === void 0 ? void 0 : _post$users4.firstname, \" \", (_post$users5 = post.users) === null || _post$users5 === void 0 ? void 0 : _post$users5.lastname]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs text-gray-300\",\n          children: moment(post === null || post === void 0 ? void 0 : post.postDate).fromNow()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }, this), ((_post$users6 = post.users) === null || _post$users6 === void 0 ? void 0 : _post$users6._id) === ((_user$authData2 = user.authData) === null || _user$authData2 === void 0 ? void 0 : _user$authData2._id) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"self-end \",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"hover:bg-white active:bg-gray-500 hover:bg-opacity-10 transition ease-in duration-75 rounded-full py-1 px-1 absolute top-3 right-5 \",\n          onClick: () => {\n            setSmallModal(prev => !prev);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: MoreIcon,\n            alt: \"\",\n            className: \" w-5 h-5  rounded-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 33\n        }, this), smallModal && /*#__PURE__*/_jsxDEV(Modal, {\n          setSmallModal: setSmallModal,\n          handleDelete: handleDelete,\n          deleteLoading: postState.deleteLoading,\n          post: post,\n          smallRef: smallRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 48\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"font-normal px-5 \",\n      children: /*#__PURE__*/_jsxDEV(\"pre\", {\n        className: \" text-sm md:text-md font-sans break-words whitespace-pre-wrap\",\n        children: post === null || post === void 0 ? void 0 : post.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 48\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), (post === null || post === void 0 ? void 0 : post.postImg) === '' ? '' : /*#__PURE__*/_jsxDEV(\"img\", {\n      src: post === null || post === void 0 ? void 0 : post.postImg,\n      alt: post === null || post === void 0 ? void 0 : post.postImg,\n      className: \"w-full object-cover rounded-md\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 40\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-3 font-light flex justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"flex gap-2 items-center font-light\",\n          onClick: handleLike,\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            className: \"h-7 w-7\",\n            fill: hasLikedPost ? 'white' : 'none',\n            viewBox: \"0 0 24 24\",\n            stroke: hasLikedPost ? 'gray' : 'white',\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 1,\n              d: \"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(NumberLike, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"font-light\",\n        onClick: () => setModalX(prev => !prev),\n        children: /*#__PURE__*/_jsxDEV(NumberComment, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 16\n      }, this), modalX && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(CommentModal, {\n          setModalX: setModalX,\n          postID: post._id,\n          refx: ref\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 32\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 27\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 12\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Post, \"vxjAtagqrXnzbDVgIjiSXkBxL8c=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useModalCloser, useSmallModalCloser];\n});\n\n_c = Post;\nexport default Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"sources":["C:/Users/Lim/Desktop/Clone/login-mern/client/src/components/Homepage/components/Post/Post.js"],"names":["React","useState","useDispatch","useSelector","moment","Link","Modal","deletePost","likePost","CommentModal","useModalCloser","useSmallModalCloser","Post","post","dispatch","postState","state","posts","user","auth","handleDelete","_id","likes","setLikes","hasLikedPost","some","like","authData","handleLike","filter","id","NumberLike","length","NumberComment","comment","ref","modalX","setModalX","smallRef","smallModal","setSmallModal","users","imageUrl","firstname","lastname","postDate","fromNow","prev","MoreIcon","deleteLoading","description","postImg"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { useDispatch,useSelector } from 'react-redux';\r\nimport moment from 'moment';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport MoreIcon from '../../../../svg/ellipsis.svg';\r\n\r\nimport Modal from '../../../layout/Modal';\r\nimport { deletePost, likePost } from '../../../../redux/actions/post';\r\nimport CommentModal from '../../../layout/Comment/CommentModal';\r\nimport { useModalCloser, useSmallModalCloser } from '../../../../customHooks/hooks';\r\nconst Post = ({ post }) => {\r\n\r\n    const dispatch = useDispatch();\r\n    const postState = useSelector(state => state.posts);\r\n    //checking the owners post\r\n    const user = useSelector(state => state.auth);\r\n\r\n    const handleDelete = () => {\r\n        dispatch(deletePost(post._id));\r\n    }\r\n    // inserting post.likes to like state\r\n    const [likes,setLikes] = useState(post.likes);\r\n    //check if user already liked the post\r\n    const hasLikedPost = likes?.some((like) => like === user.authData?._id);\r\n    \r\n    //Dispatching like \r\n    const handleLike = () => {\r\n        dispatch(likePost(post._id));\r\n    \r\n        if(hasLikedPost) {\r\n            setLikes(post.likes.filter((id) => id !== user.authData._id));\r\n        } else {\r\n            setLikes([...post.likes, user.authData._id]);\r\n        }\r\n    }\r\n\r\n    const NumberLike = () => {\r\n        if(likes?.length > 0){\r\n            return <span className=\"text-md text-white\">{likes?.length} {likes?.length > 1 ? 'Likes' : 'Like'}</span>\r\n        }\r\n        return  <span></span>\r\n    }\r\n\r\n    const NumberComment = () => {\r\n        if(post?.comment?.length > 0){\r\n            return <span>{post?.comment?.length} {post?.comment?.length > 1 ? 'Comments' : 'Comment'}</span>\r\n        }\r\n        return <span>Comment</span>\r\n    }\r\n\r\n\r\n    const {ref, modalX, setModalX} = useModalCloser(false);\r\n    const {smallRef, smallModal, setSmallModal} = useSmallModalCloser(false);\r\n\r\n    return (\r\n  \r\n        <div className=\"bg-primary rounded-md space-y-3 relative -z-10 overflow-hidden\">\r\n               \r\n            <div className=\"flex gap-3 p-3\">\r\n                <img src={post.users?.imageUrl} alt={post.users?.imageUrl} className=\"w-11 h-11 md:w-12 md:h-12  rounded-full object-cover  mx-0\" />\r\n                    <div className=\"leading-none mr-auto self-center space-y-4\">\r\n                        <Link to={`/profile/${post.users?._id}`} className=\"text-md font-semibold block\">{post.users?.firstname} {post.users?.lastname}</Link>\r\n                        <span className=\"text-xs text-gray-300\">{moment(post?.postDate).fromNow()}</span>\r\n                    </div>\r\n                    {post.users?._id === user.authData?._id &&\r\n                        <div className=\"self-end \" >\r\n                       \r\n                                <button className=\"hover:bg-white active:bg-gray-500 hover:bg-opacity-10 transition ease-in duration-75 rounded-full py-1 px-1 absolute top-3 right-5 \" onClick={() => {\r\n                                setSmallModal(prev => !prev)}} > \r\n                                    <img src={MoreIcon} alt=\"\" className=\" w-5 h-5  rounded-full\" /> \r\n                                </button>\r\n                         \r\n                                {smallModal && <Modal setSmallModal={setSmallModal} handleDelete={handleDelete} deleteLoading={postState.deleteLoading} post={post} smallRef={smallRef} /> } \r\n                        </div>\r\n                    }\r\n                \r\n            </div>\r\n            {/* description section */}\r\n            <div className=\"font-normal px-5 \"><pre className=\" text-sm md:text-md font-sans break-words whitespace-pre-wrap\">{post?.description}</pre></div>\r\n            {/* //fix the height issue */}\r\n           {post?.postImg === '' ? '' :<img src={post?.postImg} alt={post?.postImg} className=\"w-full object-cover rounded-md\" /> } \r\n            {/* like comment section */}\r\n           <div className=\"p-3 font-light flex justify-between\">\r\n               <div> \r\n                    <button className=\"flex gap-2 items-center font-light\" onClick={handleLike}>\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-7 w-7\" fill={hasLikedPost ? 'white' : 'none'}  viewBox=\"0 0 24 24\" stroke={hasLikedPost ? 'gray' : 'white'} >\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1} d=\"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5\" />\r\n                            </svg> \r\n                            <NumberLike />\r\n                        </button>\r\n                </div>\r\n               <button className=\"font-light\" onClick={()=> setModalX(prev => !prev)}>\r\n                    <NumberComment /> \r\n               </button>\r\n               {modalX && <div><CommentModal setModalX={setModalX} postID={post._id}  refx={ref}/> </div>}\r\n           </div>\r\n        </div> \r\n    )\r\n}\r\n\r\nexport default Post\r\n"]},"metadata":{},"sourceType":"module"}